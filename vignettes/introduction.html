<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="author" content="Michael Schramm" />

<meta name="date" content="2018-06-26" />

<title>Introduction to echor</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>



<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#header {
text-align: center;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; }  code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>

</head>

<body>




<h1 class="title toc-ignore">Introduction to echor</h1>
<h4 class="author"><em>Michael Schramm</em></h4>
<h4 class="date"><em>2018-06-26</em></h4>



<div id="echor-introduction" class="section level2">
<h2>echor introduction</h2>
<p><code>echor</code> is an R package to search and download data from the US Environmental Protection Agency (EPA) Environmental Compliance and History Online (ECHO). <code>echor</code> uses the <a href="https://echo.epa.gov/">ECHO API</a> to download data directly to the R as dataframes or simple features. ECHO provides information about facilities permitted to emitted air pollutants or discharge into water bodies. ECHO also provides data reported by permitted facilites as volume or concentration of pollutants during reporting time periods (typically anually for air emissions and monthly or quarterly for water discharges).</p>
<p>ECHO provides data for:</p>
<ul>
<li>Stationary sources permitted under the Clean Air Act, including data from the National Emissions Inventory, Greenhouse Gas Reporting Program, Toxics Release Inventory, and Clean Air Markets Division Acid Rain Program and Clean Air Interstate Rule.</li>
<li>Public drinking water systems permitted under the Safe Drinking Water Act, including data from the Safe Drinking Water Information System.</li>
<li>Hazardous Waste Handlers permitted under the Resource Conservation and Recovery Act, with data drawn from the RCRAInfo data system.</li>
<li>Facilities permitted under the Clean Water Act and the National Pollutant Discharge Elimination Systems (NPDES) program, including data from EPA’s ICIS-NPDES system and possibly waterbody information from EPA’s ATTAINS data system.</li>
</ul>
<p><code>echor</code> currently provides functions to retrieve air emissions and wastewater discharge data. Later releases will include functions to download drinking water supply and hazardous waste info from ECHO.</p>
<p>See <a href="https://echo.epa.gov/tools/web-services" class="uri">https://echo.epa.gov/tools/web-services</a> for information about ECHO web services and API functions.</p>
</div>
<div id="getting-started" class="section level2">
<h2>Getting started</h2>
<p>This vignette docuemnts a few key functions to get started.</p>
<p>The two main functions used to retrieve air emissions permit and facility data are: <code>echoAirGetFacilityInfo</code> and <code>echoGetCAAPR</code>. <code>echoAirGetFacilityInfo</code> returns a dataframe or simple features geospatial dataframe with information about permittee that match the query. <code>echoGetCAAPR</code> returns a dataframe with the emissions inventory report of the queried facility.</p>
<p>The two main functions used to retrieve data about facilities with permits to discharge into water bodies are <code>echoWaterGetFacilityInfo</code> and <code>echoGetEffluent</code>. <code>echoWaterGetFacilityInfo</code> returns a dataframe or simple features geospatial dataframe with information about permitees that match the query. <code>echoGetEffluent</code> returns a dataframe with reported discharges from the queried facilities.</p>
<div id="air-facility-and-emissions-searches" class="section level3">
<h3>Air facility and emissions searches</h3>
<p>Find facilities with a permit to emit air pollutants under the Clean Air Act:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">library</span>(echor)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"></a>
<a class="sourceLine" id="cb1-3" data-line-number="3">## Retrieve information about facilities within a geographic location</a>
<a class="sourceLine" id="cb1-4" data-line-number="4">df &lt;-<span class="st"> </span><span class="kw">echoAirGetFacilityInfo</span>(<span class="dt">output =</span> <span class="st">&quot;df&quot;</span>,</a>
<a class="sourceLine" id="cb1-5" data-line-number="5">                               <span class="dt">xmin =</span> <span class="st">'-96.387509'</span>,</a>
<a class="sourceLine" id="cb1-6" data-line-number="6">                               <span class="dt">ymin =</span> <span class="st">'30.583572'</span>,</a>
<a class="sourceLine" id="cb1-7" data-line-number="7">                               <span class="dt">xmax =</span> <span class="st">'-96.281422'</span>,</a>
<a class="sourceLine" id="cb1-8" data-line-number="8">                               <span class="dt">ymax =</span> <span class="st">'30.640008'</span>)</a>
<a class="sourceLine" id="cb1-9" data-line-number="9"><span class="co">#&gt; No encoding supplied: defaulting to UTF-8.</span></a>
<a class="sourceLine" id="cb1-10" data-line-number="10"><span class="co">#&gt; Parsed with column specification:</span></a>
<a class="sourceLine" id="cb1-11" data-line-number="11"><span class="co">#&gt; cols(</span></a>
<a class="sourceLine" id="cb1-12" data-line-number="12"><span class="co">#&gt;   .default = col_character(),</span></a>
<a class="sourceLine" id="cb1-13" data-line-number="13"><span class="co">#&gt;   AIRZip = col_integer(),</span></a>
<a class="sourceLine" id="cb1-14" data-line-number="14"><span class="co">#&gt;   RegistryID = col_double(),</span></a>
<a class="sourceLine" id="cb1-15" data-line-number="15"><span class="co">#&gt;   FacFIPSCode = col_integer(),</span></a>
<a class="sourceLine" id="cb1-16" data-line-number="16"><span class="co">#&gt;   FacLong = col_double(),</span></a>
<a class="sourceLine" id="cb1-17" data-line-number="17"><span class="co">#&gt;   AIRIeaCnt = col_integer(),</span></a>
<a class="sourceLine" id="cb1-18" data-line-number="18"><span class="co">#&gt;   PctilePmUs = col_double()</span></a>
<a class="sourceLine" id="cb1-19" data-line-number="19"><span class="co">#&gt; )</span></a>
<a class="sourceLine" id="cb1-20" data-line-number="20"><span class="co">#&gt; See spec(...) for full column specifications.</span></a></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-y: scroll; height:200px; overflow-x: scroll; width:500px; ">
<table class="table" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
AIRName
</th>
<th style="text-align:left;">
SourceID
</th>
<th style="text-align:left;">
AIRStreet
</th>
<th style="text-align:left;">
AIRCity
</th>
<th style="text-align:left;">
AIRState
</th>
<th style="text-align:left;">
LocalControlRegionCode
</th>
<th style="text-align:right;">
AIRZip
</th>
<th style="text-align:right;">
RegistryID
</th>
<th style="text-align:left;">
AIRCounty
</th>
<th style="text-align:left;">
AIREPARegion
</th>
<th style="text-align:left;">
FacFederalAgencyCode
</th>
<th style="text-align:right;">
FacFIPSCode
</th>
<th style="text-align:right;">
FacLong
</th>
<th style="text-align:left;">
AIRPrograms
</th>
<th style="text-align:left;">
AIRMacts
</th>
<th style="text-align:left;">
AIRStatus
</th>
<th style="text-align:left;">
ChesapeakeBayFlag
</th>
<th style="text-align:left;">
TRIIDs
</th>
<th style="text-align:left;">
FacNaaFlag
</th>
<th style="text-align:left;">
FacTRIAIRReleases
</th>
<th style="text-align:left;">
FacEisAIRReleases
</th>
<th style="text-align:left;">
FacGHGCO2Releases
</th>
<th style="text-align:right;">
AIRIeaCnt
</th>
<th style="text-align:left;">
AIRLastIeaDate
</th>
<th style="text-align:right;">
PctilePmUs
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
AGGIE CLEANERS
</td>
<td style="text-align:left;">
06000000480416E020
</td>
<td style="text-align:left;">
111 COLLEGE MAIN
</td>
<td style="text-align:left;">
COLLEGE STATION
</td>
<td style="text-align:left;">
TX
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
778401221
</td>
<td style="text-align:right;">
110001873786
</td>
<td style="text-align:left;">
Brazos
</td>
<td style="text-align:left;">
06
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
48041
</td>
<td style="text-align:right;">
-96.34588
</td>
<td style="text-align:left;">
MACT
</td>
<td style="text-align:left;">
M
</td>
<td style="text-align:left;">
Operating
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
80.7
</td>
</tr>
<tr>
<td style="text-align:left;">
ALL SEASONS 1 HR CLEANERS
</td>
<td style="text-align:left;">
06000000480416E015
</td>
<td style="text-align:left;">
2501 TEXAS AVENUE SOUTH #D100
</td>
<td style="text-align:left;">
COLLEGE STATION
</td>
<td style="text-align:left;">
TX
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
77840
</td>
<td style="text-align:right;">
110001873731
</td>
<td style="text-align:left;">
Brazos
</td>
<td style="text-align:left;">
06
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
48041
</td>
<td style="text-align:right;">
-96.30875
</td>
<td style="text-align:left;">
MACT
</td>
<td style="text-align:left;">
M
</td>
<td style="text-align:left;">
Operating
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
70.2
</td>
</tr>
<tr>
<td style="text-align:left;">
BLUEBONNET PAVING
</td>
<td style="text-align:left;">
TX0000004877700147
</td>
<td style="text-align:left;">
HWY. 60, WEST OF
</td>
<td style="text-align:left;">
COLLEGE STATION
</td>
<td style="text-align:left;">
TX
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
77840
</td>
<td style="text-align:right;">
110007194044
</td>
<td style="text-align:left;">
Brazos
</td>
<td style="text-align:left;">
06
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
48777
</td>
<td style="text-align:right;">
-96.32098
</td>
<td style="text-align:left;">
NSPS
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
Operating
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
BRYAN CERAMICS PLANT
</td>
<td style="text-align:left;">
TX0000004804100027
</td>
<td style="text-align:left;">
1500 INDEPENDENCE AVE
</td>
<td style="text-align:left;">
BRYAN
</td>
<td style="text-align:left;">
TX
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
77803
</td>
<td style="text-align:right;">
110007200830
</td>
<td style="text-align:left;">
Brazos
</td>
<td style="text-align:left;">
06
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
48041
</td>
<td style="text-align:right;">
-96.36235
</td>
<td style="text-align:left;">
SIP, TVP
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
Operating
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
07/18/2008
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
BRYAN CLEANERS &amp; LAUNDRY
</td>
<td style="text-align:left;">
06000000480416E012
</td>
<td style="text-align:left;">
1803 HOLLEMAN DRIVE
</td>
<td style="text-align:left;">
COLLEGE STATION
</td>
<td style="text-align:left;">
TX
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
77840
</td>
<td style="text-align:right;">
110001873713
</td>
<td style="text-align:left;">
Brazos
</td>
<td style="text-align:left;">
06
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
48041
</td>
<td style="text-align:right;">
-96.31750
</td>
<td style="text-align:left;">
MACT
</td>
<td style="text-align:left;">
M
</td>
<td style="text-align:left;">
Operating
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
91.1
</td>
</tr>
<tr>
<td style="text-align:left;">
CITY OF BRYAN
</td>
<td style="text-align:left;">
TX0000004804100026
</td>
<td style="text-align:left;">
1.5 MI W OF <span class="citation">@FM</span> 1687 &amp; FM 2818
</td>
<td style="text-align:left;">
BRYAN
</td>
<td style="text-align:left;">
TX
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
77801
</td>
<td style="text-align:right;">
110007194142
</td>
<td style="text-align:left;">
Brazos
</td>
<td style="text-align:left;">
06
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
48041
</td>
<td style="text-align:right;">
-96.36235
</td>
<td style="text-align:left;">
SIP
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
Operating
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
NA
</td>
</tr>
</tbody>
</table>
</div>
<p>There are over 100 arguments that can be passed to <code>echoAirGetFacilityInfo()</code> to filter permitted facilites. They are documented here: <a href="https://echo.epa.gov/tools/web-services/facility-search-air#!/Facilities/get_air_rest_services_get_facility_info" class="uri">https://echo.epa.gov/tools/web-services/facility-search-air#!/Facilities/get_air_rest_services_get_facility_info</a>. Each argument should be passeed to ECHO as <code>echoAirGetFaclityInfo(parameter = &quot;value&quot;)</code>. <code>echor</code> will URL encode strings automatically. Please note that any date argument needs to be entered as “mm/dd/yyyy”.</p>
<p>The most useful arguments are listed below:</p>
<pre><code>p_fn  string  Facility Name Filter.
              One or more case-insesitive facility names.
              Provide multiple values as comma-delimited list
              ex:
              p_fn = &quot;Aggie Cleaners, City of Bryan, TEXAS A&amp;M UNIVERSITY COLLEGE STATION CAMPUS&quot;
              
p_sa  string  Facility Street Address
              ex:
              p_sa = &quot;WELLBORN ROAD &amp; UNIVERSITY DR&quot;
              
p_ct  string  Facility City
              Provide a single case-insensitive city name
              ex:
              p_ct = &quot;College Station&quot;
              
p_co  string  Facility County
              Provide a single county name, in combination with a state value
              provided through p_st
              ex:
              p_co = &quot;Brazos&quot;, p_st = &quot;Texas&quot;
              
p_fips  string  FIPS Code
                Single 5-character Federal Information Processing Standards (FIPS) 
                state+county value
                
p_st  string  Facility State or State Equivalent Filter
              Provide one or more USPS postal abbreviations
              ex:
              p_st = &quot;TX, NC&quot;
              
p_zip string  Facility 5-Digit Zip Code
              Provide one or more 5-digit postal zip codes
              ex:
              p_zip = &quot;77843, 77845&quot;
              
xmin  string  Minimum longitude value in decimal degrees

ymin  string  Minimum latitude value in decimal degrees

xmax  string  Maximum longitude value in decimal degrees

ymax  string  Maximum latitude value in decimal degrees</code></pre>
<p>Download emissions inventory report data:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">df &lt;-<span class="st"> </span><span class="kw">echoGetCAAPR</span>(<span class="dt">p_id =</span> <span class="st">'110000350174'</span>)</a></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-y: scroll; height:200px; overflow-x: scroll; width:500px; ">
<table class="table" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Name
</th>
<th style="text-align:left;">
SourceID
</th>
<th style="text-align:left;">
Street
</th>
<th style="text-align:left;">
City
</th>
<th style="text-align:left;">
State
</th>
<th style="text-align:left;">
Zip
</th>
<th style="text-align:left;">
County
</th>
<th style="text-align:left;">
Region
</th>
<th style="text-align:right;">
Latitude
</th>
<th style="text-align:right;">
Longitude
</th>
<th style="text-align:left;">
Pollutant
</th>
<th style="text-align:left;">
UnitsOfMeasure
</th>
<th style="text-align:left;">
Program
</th>
<th style="text-align:right;">
Year
</th>
<th style="text-align:right;">
Discharge
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
CP&amp;L - SUTTON PLANT
</td>
<td style="text-align:left;">
110000350174
</td>
<td style="text-align:left;">
801 SUTTON STEAM PLANT ROAD
</td>
<td style="text-align:left;">
WILMINGTON
</td>
<td style="text-align:left;">
NC
</td>
<td style="text-align:left;">
28401
</td>
<td style="text-align:left;">
NEW HANOVER
</td>
<td style="text-align:left;">
04
</td>
<td style="text-align:right;">
34.28332
</td>
<td style="text-align:right;">
-77.98523
</td>
<td style="text-align:left;">
2,4-Dinitrotoluene
</td>
<td style="text-align:left;">
Pounds
</td>
<td style="text-align:left;">
NEI
</td>
<td style="text-align:right;">
2007
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
CP&amp;L - SUTTON PLANT
</td>
<td style="text-align:left;">
110000350174
</td>
<td style="text-align:left;">
801 SUTTON STEAM PLANT ROAD
</td>
<td style="text-align:left;">
WILMINGTON
</td>
<td style="text-align:left;">
NC
</td>
<td style="text-align:left;">
28401
</td>
<td style="text-align:left;">
NEW HANOVER
</td>
<td style="text-align:left;">
04
</td>
<td style="text-align:right;">
34.28332
</td>
<td style="text-align:right;">
-77.98523
</td>
<td style="text-align:left;">
2-Chloroacetophenone
</td>
<td style="text-align:left;">
Pounds
</td>
<td style="text-align:left;">
NEI
</td>
<td style="text-align:right;">
2007
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
CP&amp;L - SUTTON PLANT
</td>
<td style="text-align:left;">
110000350174
</td>
<td style="text-align:left;">
801 SUTTON STEAM PLANT ROAD
</td>
<td style="text-align:left;">
WILMINGTON
</td>
<td style="text-align:left;">
NC
</td>
<td style="text-align:left;">
28401
</td>
<td style="text-align:left;">
NEW HANOVER
</td>
<td style="text-align:left;">
04
</td>
<td style="text-align:right;">
34.28332
</td>
<td style="text-align:right;">
-77.98523
</td>
<td style="text-align:left;">
Acenaphthene
</td>
<td style="text-align:left;">
Pounds
</td>
<td style="text-align:left;">
NEI
</td>
<td style="text-align:right;">
2007
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
CP&amp;L - SUTTON PLANT
</td>
<td style="text-align:left;">
110000350174
</td>
<td style="text-align:left;">
801 SUTTON STEAM PLANT ROAD
</td>
<td style="text-align:left;">
WILMINGTON
</td>
<td style="text-align:left;">
NC
</td>
<td style="text-align:left;">
28401
</td>
<td style="text-align:left;">
NEW HANOVER
</td>
<td style="text-align:left;">
04
</td>
<td style="text-align:right;">
34.28332
</td>
<td style="text-align:right;">
-77.98523
</td>
<td style="text-align:left;">
Acetaldehyde
</td>
<td style="text-align:left;">
Pounds
</td>
<td style="text-align:left;">
NEI
</td>
<td style="text-align:right;">
2007
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
CP&amp;L - SUTTON PLANT
</td>
<td style="text-align:left;">
110000350174
</td>
<td style="text-align:left;">
801 SUTTON STEAM PLANT ROAD
</td>
<td style="text-align:left;">
WILMINGTON
</td>
<td style="text-align:left;">
NC
</td>
<td style="text-align:left;">
28401
</td>
<td style="text-align:left;">
NEW HANOVER
</td>
<td style="text-align:left;">
04
</td>
<td style="text-align:right;">
34.28332
</td>
<td style="text-align:right;">
-77.98523
</td>
<td style="text-align:left;">
Acetophenone
</td>
<td style="text-align:left;">
Pounds
</td>
<td style="text-align:left;">
NEI
</td>
<td style="text-align:right;">
2007
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
CP&amp;L - SUTTON PLANT
</td>
<td style="text-align:left;">
110000350174
</td>
<td style="text-align:left;">
801 SUTTON STEAM PLANT ROAD
</td>
<td style="text-align:left;">
WILMINGTON
</td>
<td style="text-align:left;">
NC
</td>
<td style="text-align:left;">
28401
</td>
<td style="text-align:left;">
NEW HANOVER
</td>
<td style="text-align:left;">
04
</td>
<td style="text-align:right;">
34.28332
</td>
<td style="text-align:right;">
-77.98523
</td>
<td style="text-align:left;">
Allyl chloride
</td>
<td style="text-align:left;">
Pounds
</td>
<td style="text-align:left;">
NEI
</td>
<td style="text-align:right;">
2007
</td>
<td style="text-align:right;">
NA
</td>
</tr>
</tbody>
</table>
</div>
<p>There are only two valid arguments for <code>echoGetCAAPR</code>.</p>
<pre><code>p_id  string  EPA Facility Registry Service's REGISTRY_ID.

p_units string  Units of measurement. Defaults is 'lbs'.
                Enter &quot;TPWE&quot; for toxic weighted pounds equivalents.</code></pre>
</div>
<div id="water-facility-and-discharge-searches" class="section level3">
<h3>Water facility and discharge searches</h3>
<p>Find facilites with NPDES permits to discharge wastewater:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">df &lt;-<span class="st"> </span><span class="kw">echoWaterGetFacilityInfo</span>(<span class="dt">xmin =</span> <span class="st">'-96.407563'</span>, <span class="dt">ymin =</span> <span class="st">'30.554395'</span>, </a>
<a class="sourceLine" id="cb5-2" data-line-number="2">                               <span class="dt">xmax =</span> <span class="st">'-96.25947'</span>,  <span class="dt">ymax =</span> <span class="st">'30.751984'</span>, </a>
<a class="sourceLine" id="cb5-3" data-line-number="3">                               <span class="dt">output =</span> <span class="st">'df'</span>)</a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="co">#&gt; No encoding supplied: defaulting to UTF-8.</span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="co">#&gt; Parsed with column specification:</span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6"><span class="co">#&gt; cols(</span></a>
<a class="sourceLine" id="cb5-7" data-line-number="7"><span class="co">#&gt;   .default = col_character(),</span></a>
<a class="sourceLine" id="cb5-8" data-line-number="8"><span class="co">#&gt;   RegistryID = col_double(),</span></a>
<a class="sourceLine" id="cb5-9" data-line-number="9"><span class="co">#&gt;   FacDerivedHuc = col_integer(),</span></a>
<a class="sourceLine" id="cb5-10" data-line-number="10"><span class="co">#&gt;   FacLat = col_double(),</span></a>
<a class="sourceLine" id="cb5-11" data-line-number="11"><span class="co">#&gt;   FacLong = col_double(),</span></a>
<a class="sourceLine" id="cb5-12" data-line-number="12"><span class="co">#&gt;   CWPTotalDesignFlowNmbr = col_double(),</span></a>
<a class="sourceLine" id="cb5-13" data-line-number="13"><span class="co">#&gt;   CWPActualAverageFlowNmbr = col_double(),</span></a>
<a class="sourceLine" id="cb5-14" data-line-number="14"><span class="co">#&gt;   CWPStateWaterBodyCode = col_double()</span></a>
<a class="sourceLine" id="cb5-15" data-line-number="15"><span class="co">#&gt; )</span></a>
<a class="sourceLine" id="cb5-16" data-line-number="16"><span class="co">#&gt; See spec(...) for full column specifications.</span></a></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-y: scroll; height:200px; overflow-x: scroll; width:500px; ">
<table class="table" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
CWPName
</th>
<th style="text-align:left;">
SourceID
</th>
<th style="text-align:left;">
CWPStreet
</th>
<th style="text-align:left;">
CWPCity
</th>
<th style="text-align:left;">
CWPState
</th>
<th style="text-align:left;">
CWPStateDistrict
</th>
<th style="text-align:left;">
CWPZip
</th>
<th style="text-align:left;">
MasterExternalPermitNmbr
</th>
<th style="text-align:right;">
RegistryID
</th>
<th style="text-align:left;">
CWPCounty
</th>
<th style="text-align:left;">
CWPEPARegion
</th>
<th style="text-align:right;">
FacDerivedHuc
</th>
<th style="text-align:right;">
FacLat
</th>
<th style="text-align:right;">
FacLong
</th>
<th style="text-align:right;">
CWPTotalDesignFlowNmbr
</th>
<th style="text-align:right;">
CWPActualAverageFlowNmbr
</th>
<th style="text-align:left;">
ReceivingMs4Name
</th>
<th style="text-align:left;">
AssociatedPollutant
</th>
<th style="text-align:left;">
MsgpPermitType
</th>
<th style="text-align:left;">
CWPPermitStatusDesc
</th>
<th style="text-align:left;">
CWPPermitTypeDesc
</th>
<th style="text-align:left;">
CWPIssueDate
</th>
<th style="text-align:left;">
CWPEffectiveDate
</th>
<th style="text-align:left;">
CWPExpirationDate
</th>
<th style="text-align:left;">
CWPSNCStatusDate
</th>
<th style="text-align:right;">
CWPStateWaterBodyCode
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
AGGIE ACRES WWTP
</td>
<td style="text-align:left;">
TX0132187
</td>
<td style="text-align:left;">
800 FT SE OF N DOWLING RD APPROX 600 FT SW OF WALN
</td>
<td style="text-align:left;">
COLLEGE STATION
</td>
<td style="text-align:left;">
TX
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
77845
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
110064633829
</td>
<td style="text-align:left;">
Brazos
</td>
<td style="text-align:left;">
06
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
30.55565
</td>
<td style="text-align:right;">
-96.29110
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
Not Needed
</td>
<td style="text-align:left;">
NPDES Individual Permit
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
03/31/2018
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
AGRIVEST SWINE FEEDLOT
</td>
<td style="text-align:left;">
TX0121240
</td>
<td style="text-align:left;">
SWISHER COUNTY
</td>
<td style="text-align:left;">
BRYAN
</td>
<td style="text-align:left;">
TX
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
00000
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
110039193271
</td>
<td style="text-align:left;">
Swisher
</td>
<td style="text-align:left;">
06
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
30.66658
</td>
<td style="text-align:right;">
-96.36552
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
Terminated
</td>
<td style="text-align:left;">
NPDES Individual Permit
</td>
<td style="text-align:left;">
01/14/2000
</td>
<td style="text-align:left;">
01/14/2000
</td>
<td style="text-align:left;">
07/27/2004
</td>
<td style="text-align:left;">
03/31/2018
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
ATKINS STREET POWER STATION
</td>
<td style="text-align:left;">
TX0027952
</td>
<td style="text-align:left;">
601 ATKINS STREET
</td>
<td style="text-align:left;">
BRYAN
</td>
<td style="text-align:left;">
TX
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
77801
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
110001866623
</td>
<td style="text-align:left;">
Brazos
</td>
<td style="text-align:left;">
06
</td>
<td style="text-align:right;">
12070103
</td>
<td style="text-align:right;">
30.64816
</td>
<td style="text-align:right;">
-96.37165
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
0.385
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
Terminated
</td>
<td style="text-align:left;">
NPDES Individual Permit
</td>
<td style="text-align:left;">
08/28/2014
</td>
<td style="text-align:left;">
09/01/2014
</td>
<td style="text-align:left;">
05/01/2019
</td>
<td style="text-align:left;">
03/31/2018
</td>
<td style="text-align:right;">
1.20701e+11
</td>
</tr>
<tr>
<td style="text-align:left;">
ATOFINA CHEMICALS, INC.
</td>
<td style="text-align:left;">
TX0108863
</td>
<td style="text-align:left;">
SW OF THE MO PACIFIC RR &amp;
</td>
<td style="text-align:left;">
BRYAN
</td>
<td style="text-align:left;">
TX
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
77801
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
110000464293
</td>
<td style="text-align:left;">
Brazos
</td>
<td style="text-align:left;">
06
</td>
<td style="text-align:right;">
12070103
</td>
<td style="text-align:right;">
30.65792
</td>
<td style="text-align:right;">
-96.37303
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
Expired
</td>
<td style="text-align:left;">
NPDES Individual Permit
</td>
<td style="text-align:left;">
06/30/2009
</td>
<td style="text-align:left;">
07/01/2009
</td>
<td style="text-align:left;">
05/01/2013
</td>
<td style="text-align:left;">
03/31/2018
</td>
<td style="text-align:right;">
1.20701e+07
</td>
</tr>
<tr>
<td style="text-align:left;">
BARTLETT 1
</td>
<td style="text-align:left;">
TX0120421
</td>
<td style="text-align:left;">
SWISHER COUNTY
</td>
<td style="text-align:left;">
AMARILLO
</td>
<td style="text-align:left;">
TX
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
00000
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
110039193271
</td>
<td style="text-align:left;">
Swisher
</td>
<td style="text-align:left;">
06
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
30.66658
</td>
<td style="text-align:right;">
-96.36552
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
Terminated
</td>
<td style="text-align:left;">
NPDES Individual Permit
</td>
<td style="text-align:left;">
01/14/2000
</td>
<td style="text-align:left;">
01/14/2000
</td>
<td style="text-align:left;">
07/27/2004
</td>
<td style="text-align:left;">
03/31/2018
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
BOSSIER PARISH RESOURCE CENTER
</td>
<td style="text-align:left;">
LAG830191
</td>
<td style="text-align:left;">
3228 BARKDALE BLVD
</td>
<td style="text-align:left;">
BENTON
</td>
<td style="text-align:left;">
LA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
71111
</td>
<td style="text-align:left;">
LAG830000
</td>
<td style="text-align:right;">
110016696832
</td>
<td style="text-align:left;">
Bossier
</td>
<td style="text-align:left;">
06
</td>
<td style="text-align:right;">
12070103
</td>
<td style="text-align:right;">
30.61602
</td>
<td style="text-align:right;">
-96.28182
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
Terminated
</td>
<td style="text-align:left;">
General Permit Covered Facility
</td>
<td style="text-align:left;">
12/15/2012
</td>
<td style="text-align:left;">
12/15/2012
</td>
<td style="text-align:left;">
12/14/2017
</td>
<td style="text-align:left;">
03/31/2018
</td>
<td style="text-align:right;">
1.11402e+07
</td>
</tr>
</tbody>
</table>
</div>
<p>Again, there are a ton of possible arguments to query ECHO with. All arguments are described here: <a href="https://echo.epa.gov/tools/web-services/facility-search-water#!/Facility_Information/get_cwa_rest_services_get_facility_info" class="uri">https://echo.epa.gov/tools/web-services/facility-search-water#!/Facility_Information/get_cwa_rest_services_get_facility_info</a></p>
<p>Commonly used arguments are provided below:</p>
<pre><code>p_fn  string  Facility Name Filter.
              One or more case-insesitive facility names.
              Provide multiple values as comma-delimited list
              ex:
              p_fn = &quot;Aggie Cleaners, City of Bryan, TEXAS A&amp;M UNIVERSITY COLLEGE STATION CAMPUS&quot;
              
p_sa  string  Facility Street Address
              ex:
              p_sa = &quot;WELLBORN ROAD &amp; UNIVERSITY DR&quot;
              
p_ct  string  Facility City
              Provide a single case-insensitive city name
              ex:
              p_ct = &quot;College Station&quot;
              
p_co  string  Facility County
              Provide a single county name, in combination with a state value
              provided through p_st
              ex:
              p_co = &quot;Brazos&quot;, p_st = &quot;Texas&quot;
              
p_fips  string  FIPS Code
                Single 5-character Federal Information Processing Standards (FIPS) 
                state+county value
                
p_st  string  Facility State or State Equivalent Filter
              Provide one or more USPS postal abbreviations
              ex:
              p_st = &quot;TX, NC&quot;
              
p_zip string  Facility 5-Digit Zip Code
              Provide one or more 5-digit postal zip codes
              ex:
              p_zip = &quot;77843, 77845&quot;
              
xmin  string  Minimum longitude value in decimal degrees

ymin  string  Minimum latitude value in decimal degrees

xmax  string  Maximum longitude value in decimal degrees

ymax  string  Maximum latitude value in decimal degrees

p_huc string  2-,4,6-,or 8-digit watershed code.
              May contain comma-seperated values
              </code></pre>
<p>Download discharge monitoring reports from ECHO from specified facilities:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">df &lt;-<span class="st"> </span><span class="kw">echoGetEffluent</span>(<span class="dt">p_id =</span> <span class="st">'tx0119407'</span>, <span class="dt">parameter_code =</span> <span class="st">'50050'</span>)</a></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-y: scroll; height:200px; overflow-x: scroll; width:500px; ">
<table class="table" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Name
</th>
<th style="text-align:left;">
Outfall
</th>
<th style="text-align:left;">
ID
</th>
<th style="text-align:left;">
RegistryID
</th>
<th style="text-align:left;">
Location
</th>
<th style="text-align:left;">
City
</th>
<th style="text-align:left;">
State
</th>
<th style="text-align:left;">
Zip
</th>
<th style="text-align:left;">
Status
</th>
<th style="text-align:left;">
LimitBeginDate
</th>
<th style="text-align:left;">
LimitEndDate
</th>
<th style="text-align:right;">
LimitValueNmbr
</th>
<th style="text-align:left;">
LimitUnitCode
</th>
<th style="text-align:left;">
LimitUnitDesc
</th>
<th style="text-align:left;">
StdUnitCode
</th>
<th style="text-align:left;">
StdUnitDesc
</th>
<th style="text-align:left;">
LimitValueStdUnit
</th>
<th style="text-align:left;">
StatisticalBaseCode
</th>
<th style="text-align:left;">
StatisticalBaseDesc
</th>
<th style="text-align:left;">
StatisticalBaseTypeCode
</th>
<th style="text-align:left;">
StatisticalBaseTypeDesc
</th>
<th style="text-align:left;">
DMREventId
</th>
<th style="text-align:left;">
MonitoringPeriodEndDate
</th>
<th style="text-align:left;">
DMRFormValueId
</th>
<th style="text-align:left;">
ValueTypeCode
</th>
<th style="text-align:left;">
ValueTypeDesc
</th>
<th style="text-align:left;">
DMRValueId
</th>
<th style="text-align:right;">
DMRValueNmbr
</th>
<th style="text-align:left;">
DMRUnitCode
</th>
<th style="text-align:left;">
DMRUnitDesc
</th>
<th style="text-align:right;">
DMRValueStdUnits
</th>
<th style="text-align:left;">
DMRQualifierCode
</th>
<th style="text-align:left;">
ValueReceivedDate
</th>
<th style="text-align:right;">
DaysLate
</th>
<th style="text-align:left;">
NODICode
</th>
<th style="text-align:left;">
NODEDesc
</th>
<th style="text-align:left;">
ExceedancePct
</th>
<th style="text-align:left;">
NPDESViolations
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
SKIDMORE WSC WWTP
</td>
<td style="text-align:left;">
001
</td>
<td style="text-align:left;">
TX0119407
</td>
<td style="text-align:left;">
110009771693
</td>
<td style="text-align:left;">
1000 FT N OF THE END OF BLACK RANCH RD AND APPROX
</td>
<td style="text-align:left;">
SKIDMORE
</td>
<td style="text-align:left;">
TX
</td>
<td style="text-align:left;">
78387
</td>
<td style="text-align:left;">
78387
</td>
<td style="text-align:left;">
16648
</td>
<td style="text-align:left;">
18322
</td>
<td style="text-align:right;">
0.131
</td>
<td style="text-align:left;">
03
</td>
<td style="text-align:left;">
MGD
</td>
<td style="text-align:left;">
MGD
</td>
<td style="text-align:left;">
MGD
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
DB
</td>
<td style="text-align:left;">
DAILY AV
</td>
<td style="text-align:left;">
AVG
</td>
<td style="text-align:left;">
Average
</td>
<td style="text-align:left;">
3403423151
</td>
<td style="text-align:left;">
16678
</td>
<td style="text-align:left;">
3442281023
</td>
<td style="text-align:left;">
Q1
</td>
<td style="text-align:left;">
Quantity1
</td>
<td style="text-align:left;">
3612155723
</td>
<td style="text-align:right;">
0.0492
</td>
<td style="text-align:left;">
03
</td>
<td style="text-align:left;">
MGD
</td>
<td style="text-align:right;">
0.0492
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
16695
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
SKIDMORE WSC WWTP
</td>
<td style="text-align:left;">
001
</td>
<td style="text-align:left;">
TX0119407
</td>
<td style="text-align:left;">
110009771693
</td>
<td style="text-align:left;">
1000 FT N OF THE END OF BLACK RANCH RD AND APPROX
</td>
<td style="text-align:left;">
SKIDMORE
</td>
<td style="text-align:left;">
TX
</td>
<td style="text-align:left;">
78387
</td>
<td style="text-align:left;">
78387
</td>
<td style="text-align:left;">
16648
</td>
<td style="text-align:left;">
18322
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
03
</td>
<td style="text-align:left;">
MGD
</td>
<td style="text-align:left;">
MGD
</td>
<td style="text-align:left;">
MGD
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
DD
</td>
<td style="text-align:left;">
DAILY MX
</td>
<td style="text-align:left;">
MAX
</td>
<td style="text-align:left;">
Maximum
</td>
<td style="text-align:left;">
3403423151
</td>
<td style="text-align:left;">
16678
</td>
<td style="text-align:left;">
3442281032
</td>
<td style="text-align:left;">
Q2
</td>
<td style="text-align:left;">
Quantity2
</td>
<td style="text-align:left;">
3612155724
</td>
<td style="text-align:right;">
0.0534
</td>
<td style="text-align:left;">
03
</td>
<td style="text-align:left;">
MGD
</td>
<td style="text-align:right;">
0.0534
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
16695
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
SKIDMORE WSC WWTP
</td>
<td style="text-align:left;">
001
</td>
<td style="text-align:left;">
TX0119407
</td>
<td style="text-align:left;">
110009771693
</td>
<td style="text-align:left;">
1000 FT N OF THE END OF BLACK RANCH RD AND APPROX
</td>
<td style="text-align:left;">
SKIDMORE
</td>
<td style="text-align:left;">
TX
</td>
<td style="text-align:left;">
78387
</td>
<td style="text-align:left;">
78387
</td>
<td style="text-align:left;">
16648
</td>
<td style="text-align:left;">
18322
</td>
<td style="text-align:right;">
0.131
</td>
<td style="text-align:left;">
03
</td>
<td style="text-align:left;">
MGD
</td>
<td style="text-align:left;">
MGD
</td>
<td style="text-align:left;">
MGD
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
DB
</td>
<td style="text-align:left;">
DAILY AV
</td>
<td style="text-align:left;">
AVG
</td>
<td style="text-align:left;">
Average
</td>
<td style="text-align:left;">
3403423173
</td>
<td style="text-align:left;">
16708
</td>
<td style="text-align:left;">
3442281323
</td>
<td style="text-align:left;">
Q1
</td>
<td style="text-align:left;">
Quantity1
</td>
<td style="text-align:left;">
3613394763
</td>
<td style="text-align:right;">
0.0512
</td>
<td style="text-align:left;">
03
</td>
<td style="text-align:left;">
MGD
</td>
<td style="text-align:right;">
0.0512
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
16728
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
SKIDMORE WSC WWTP
</td>
<td style="text-align:left;">
001
</td>
<td style="text-align:left;">
TX0119407
</td>
<td style="text-align:left;">
110009771693
</td>
<td style="text-align:left;">
1000 FT N OF THE END OF BLACK RANCH RD AND APPROX
</td>
<td style="text-align:left;">
SKIDMORE
</td>
<td style="text-align:left;">
TX
</td>
<td style="text-align:left;">
78387
</td>
<td style="text-align:left;">
78387
</td>
<td style="text-align:left;">
16648
</td>
<td style="text-align:left;">
18322
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
03
</td>
<td style="text-align:left;">
MGD
</td>
<td style="text-align:left;">
MGD
</td>
<td style="text-align:left;">
MGD
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
DD
</td>
<td style="text-align:left;">
DAILY MX
</td>
<td style="text-align:left;">
MAX
</td>
<td style="text-align:left;">
Maximum
</td>
<td style="text-align:left;">
3403423173
</td>
<td style="text-align:left;">
16708
</td>
<td style="text-align:left;">
3442281328
</td>
<td style="text-align:left;">
Q2
</td>
<td style="text-align:left;">
Quantity2
</td>
<td style="text-align:left;">
3613394764
</td>
<td style="text-align:right;">
0.0710
</td>
<td style="text-align:left;">
03
</td>
<td style="text-align:left;">
MGD
</td>
<td style="text-align:right;">
0.0710
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
16728
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
SKIDMORE WSC WWTP
</td>
<td style="text-align:left;">
001
</td>
<td style="text-align:left;">
TX0119407
</td>
<td style="text-align:left;">
110009771693
</td>
<td style="text-align:left;">
1000 FT N OF THE END OF BLACK RANCH RD AND APPROX
</td>
<td style="text-align:left;">
SKIDMORE
</td>
<td style="text-align:left;">
TX
</td>
<td style="text-align:left;">
78387
</td>
<td style="text-align:left;">
78387
</td>
<td style="text-align:left;">
16648
</td>
<td style="text-align:left;">
18322
</td>
<td style="text-align:right;">
0.131
</td>
<td style="text-align:left;">
03
</td>
<td style="text-align:left;">
MGD
</td>
<td style="text-align:left;">
MGD
</td>
<td style="text-align:left;">
MGD
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
DB
</td>
<td style="text-align:left;">
DAILY AV
</td>
<td style="text-align:left;">
AVG
</td>
<td style="text-align:left;">
Average
</td>
<td style="text-align:left;">
3403423185
</td>
<td style="text-align:left;">
16739
</td>
<td style="text-align:left;">
3442281496
</td>
<td style="text-align:left;">
Q1
</td>
<td style="text-align:left;">
Quantity1
</td>
<td style="text-align:left;">
3614856996
</td>
<td style="text-align:right;">
0.0480
</td>
<td style="text-align:left;">
03
</td>
<td style="text-align:left;">
MGD
</td>
<td style="text-align:right;">
0.0480
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
16759
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
SKIDMORE WSC WWTP
</td>
<td style="text-align:left;">
001
</td>
<td style="text-align:left;">
TX0119407
</td>
<td style="text-align:left;">
110009771693
</td>
<td style="text-align:left;">
1000 FT N OF THE END OF BLACK RANCH RD AND APPROX
</td>
<td style="text-align:left;">
SKIDMORE
</td>
<td style="text-align:left;">
TX
</td>
<td style="text-align:left;">
78387
</td>
<td style="text-align:left;">
78387
</td>
<td style="text-align:left;">
16648
</td>
<td style="text-align:left;">
18322
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
03
</td>
<td style="text-align:left;">
MGD
</td>
<td style="text-align:left;">
MGD
</td>
<td style="text-align:left;">
MGD
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
DD
</td>
<td style="text-align:left;">
DAILY MX
</td>
<td style="text-align:left;">
MAX
</td>
<td style="text-align:left;">
Maximum
</td>
<td style="text-align:left;">
3403423185
</td>
<td style="text-align:left;">
16739
</td>
<td style="text-align:left;">
3442281524
</td>
<td style="text-align:left;">
Q2
</td>
<td style="text-align:left;">
Quantity2
</td>
<td style="text-align:left;">
3614856997
</td>
<td style="text-align:right;">
0.0613
</td>
<td style="text-align:left;">
03
</td>
<td style="text-align:left;">
MGD
</td>
<td style="text-align:right;">
0.0613
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
16759
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
</tbody>
</table>
</div>
<p>This function only retrieves from a single facility per call. The following arguments are available from ECHO:</p>
<pre><code>p_id  string  EPA Facility Registry Service's REGISTRY_ID.

outfall string  Three-character code identifying the point of discharge.

parameter_code  string  Five-digit numeric code identifying the parameter.

start_date  string  Start date of interest. Must be entered as &quot;mm/dd/yyyy&quot;

end_date  string  End date of interest. Must be entered as &quot;mm/dd/yyyy&quot;</code></pre>
<p>Parameters codes can be searched using <code>echoWaterGetParams</code>.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="kw">echoWaterGetParams</span>(<span class="dt">term =</span> <span class="st">&quot;Oxygen, dissolved&quot;</span>)</a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="co">#&gt; # A tibble: 5 x 2</span></a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="co">#&gt;   ValueCode ValueDescription                     </span></a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="co">#&gt;   &lt;chr&gt;     &lt;chr&gt;                                </span></a>
<a class="sourceLine" id="cb9-5" data-line-number="5"><span class="co">#&gt; 1 00300     Oxygen, dissolved [DO]               </span></a>
<a class="sourceLine" id="cb9-6" data-line-number="6"><span class="co">#&gt; 2 51646     Oxygen, dissolved [DO] maximum       </span></a>
<a class="sourceLine" id="cb9-7" data-line-number="7"><span class="co">#&gt; 3 51645     Oxygen, dissolved [DO] minimum       </span></a>
<a class="sourceLine" id="cb9-8" data-line-number="8"><span class="co">#&gt; 4 00301     Oxygen, dissolved percent saturation </span></a>
<a class="sourceLine" id="cb9-9" data-line-number="9"><span class="co">#&gt; 5 00399     Oxygen, dissolved, % of time violated</span></a></code></pre></div>
<p>Available arguments include:</p>
<pre><code>term string partial or complete search phrase or word

code  string  partial or complete code value</code></pre>
<p>You can only enter either term or code arguments.</p>
</div>
<div id="spatial-data" class="section level3">
<h3>Spatial data</h3>
<p><code>echor</code> can also return spatial data frames known as simple features (<a href="https://r-spatial.github.io/sf/" class="uri">https://r-spatial.github.io/sf/</a>), to facilitate creation of maps. Both <code>echoAirGetFacilityInfo</code> and <code>echoWaterGetFacilityInfo</code> include arguments to return simple feature dataframes.</p>
<p>Using <code>sf</code>, <code>ggmap</code>, and the current development version of <code>ggplot2</code> (<code>devtools::install_github(&quot;tidyverse/ggplot2&quot;)</code>), we can quickly create a map of downloaded data.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1">## Sample code only,</a>
<a class="sourceLine" id="cb11-2" data-line-number="2">## This example requires the development</a>
<a class="sourceLine" id="cb11-3" data-line-number="3">## version of ggplot2 with support for</a>
<a class="sourceLine" id="cb11-4" data-line-number="4">## geom_sf()</a>
<a class="sourceLine" id="cb11-5" data-line-number="5"></a>
<a class="sourceLine" id="cb11-6" data-line-number="6"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb11-7" data-line-number="7"><span class="kw">library</span>(ggmap)</a>
<a class="sourceLine" id="cb11-8" data-line-number="8"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb11-9" data-line-number="9"><span class="kw">library</span>(purrr)</a>
<a class="sourceLine" id="cb11-10" data-line-number="10"><span class="kw">library</span>(sf)</a>
<a class="sourceLine" id="cb11-11" data-line-number="11"><span class="kw">library</span>(ggrepel)</a>
<a class="sourceLine" id="cb11-12" data-line-number="12"></a>
<a class="sourceLine" id="cb11-13" data-line-number="13">## Download data as a simple feature</a>
<a class="sourceLine" id="cb11-14" data-line-number="14">df &lt;-<span class="st"> </span><span class="kw">echoWaterGetFacilityInfo</span>(<span class="dt">xmin =</span> <span class="st">'-96.407563'</span>, <span class="dt">ymin =</span> <span class="st">'30.554395'</span>,</a>
<a class="sourceLine" id="cb11-15" data-line-number="15">                                        <span class="dt">xmax =</span> <span class="st">'-96.25947'</span>, <span class="dt">ymax =</span> <span class="st">'30.751984'</span>,</a>
<a class="sourceLine" id="cb11-16" data-line-number="16">                                        <span class="dt">output =</span> <span class="st">'sf'</span>)</a>
<a class="sourceLine" id="cb11-17" data-line-number="17">## Download a basemap with gg_map</a>
<a class="sourceLine" id="cb11-18" data-line-number="18">collegestation &lt;-<span class="st"> </span><span class="kw">get_map</span>(<span class="dt">location =</span> <span class="kw">c</span>(<span class="op">-</span><span class="fl">96.387509</span>, <span class="fl">30.583572</span>,</a>
<a class="sourceLine" id="cb11-19" data-line-number="19">                                       <span class="fl">-96.281422</span>, <span class="fl">30.640008</span>), </a>
<a class="sourceLine" id="cb11-20" data-line-number="20">                          <span class="dt">zoom =</span> <span class="dv">14</span>, <span class="dt">maptype =</span> <span class="st">&quot;toner&quot;</span>)</a>
<a class="sourceLine" id="cb11-21" data-line-number="21"></a>
<a class="sourceLine" id="cb11-22" data-line-number="22">## Use coordinates to create label locations</a>
<a class="sourceLine" id="cb11-23" data-line-number="23">df &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-24" data-line-number="24"><span class="st">  </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb11-25" data-line-number="25">    <span class="dt">coords =</span> <span class="kw">map</span>(geometry, st_coordinates),</a>
<a class="sourceLine" id="cb11-26" data-line-number="26">    <span class="dt">coords_x =</span> <span class="kw">map_dbl</span>(coords, <span class="dv">1</span>),</a>
<a class="sourceLine" id="cb11-27" data-line-number="27">    <span class="dt">coords_y =</span> <span class="kw">map_dbl</span>(coords, <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb11-28" data-line-number="28">  )</a>
<a class="sourceLine" id="cb11-29" data-line-number="29"></a>
<a class="sourceLine" id="cb11-30" data-line-number="30">## Make the map</a>
<a class="sourceLine" id="cb11-31" data-line-number="31"><span class="kw">ggmap</span>(collegestation) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb11-32" data-line-number="32"><span class="st">  </span><span class="kw">geom_sf</span>(<span class="dt">data =</span> df, <span class="dt">inherit.aes =</span> <span class="ot">FALSE</span>, <span class="dt">shape =</span> <span class="dv">21</span>, </a>
<a class="sourceLine" id="cb11-33" data-line-number="33">          <span class="dt">color =</span> <span class="st">&quot;darkred&quot;</span>, <span class="dt">fill =</span> <span class="st">&quot;darkred&quot;</span>, </a>
<a class="sourceLine" id="cb11-34" data-line-number="34">          <span class="dt">size =</span> <span class="dv">2</span>, <span class="dt">alpha =</span> <span class="fl">0.25</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb11-35" data-line-number="35"><span class="st">  </span><span class="kw">geom_label_repel</span>(<span class="dt">data =</span> df, <span class="kw">aes</span>(<span class="dt">x =</span> coords_x, <span class="dt">y =</span> coords_y, <span class="dt">label =</span> SourceID),</a>
<a class="sourceLine" id="cb11-36" data-line-number="36">                   <span class="dt">point.padding =</span> <span class="fl">.5</span>, <span class="dt">min.segment.length =</span> <span class="fl">0.1</span>,</a>
<a class="sourceLine" id="cb11-37" data-line-number="37">                   <span class="dt">size =</span> <span class="dv">2</span>, <span class="dt">color =</span> <span class="st">&quot;dodgerblue&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb11-38" data-line-number="38"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Longitude&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;Latitude&quot;</span>, </a>
<a class="sourceLine" id="cb11-39" data-line-number="39">       <span class="dt">title =</span> <span class="st">&quot;NPDES permits near Texas A&amp;M&quot;</span>,</a>
<a class="sourceLine" id="cb11-40" data-line-number="40">       <span class="dt">caption =</span> <span class="st">&quot;Source: EPA ECHO database&quot;</span>)</a></code></pre></div>
</div>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
